#include <bits/stdc++.h>
using namespace std;

int main(){
    int n;
    cin >> n;
    vector<long long> h(n);
    for(int i=0;i<n;i++) cin >> h[i];

    stack<int> st;
    long long ans = 0;
    int i = 0;

    while(i < n){
        if(st.empty() || h[st.top()] <= h[i]){
            st.push(i);
            i++;
        } else {
            int top = st.top();
            st.pop();
            long long width = st.empty() ? i : i - st.top() - 1;
            ans = max(ans, h[top] * width);
        }
    }

    while(!st.empty()){
        int top = st.top();
        st.pop();
        long long width = st.empty() ? i : i - st.top() - 1;
        ans = max(ans, h[top] * width);
    }

    cout << ans;
}
